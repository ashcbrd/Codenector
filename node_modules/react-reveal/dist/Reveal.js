"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Zoom=exports.RotateUpRight=exports.RotateUpLeft=exports.RotateDownRight=exports.RotateDownLeft=exports.Rotate=exports.FlipX=exports.FlipY=exports.Flip=exports.SlideUpBig=exports.SlideUp=exports.SlideRightBig=exports.SlideRight=exports.SlideLeft=exports.SlideDownBig=exports.SlideDown=exports.Fade=void 0;var _extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_objectWithoutProperties2=require("babel-runtime/helpers/objectWithoutProperties"),_objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),propTypes={effect:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.object]),transition:_propTypes2.default.string,className:_propTypes2.default.string,style:_propTypes2.default.object,ssr:_propTypes2.default.bool,fraction:_propTypes2.default.number,throttleTimeout:_propTypes2.default.number,onReveal:_propTypes2.default.func},defaultProps={transition:"all 1s ease 0s",fraction:.2,throttleTimeout:66,ssr:!1},Reveal=function(e){function t(){var e,r,o,a;(0,_classCallCheck3.default)(this,t);for(var n=arguments.length,s=Array(n),l=0;l<n;l++)s[l]=arguments[l];return r=o=(0,_possibleConstructorReturn3.default)(this,(e=t.__proto__||(0,_getPrototypeOf2.default)(t)).call.apply(e,[this].concat(s))),o.revealTimeout=void 0,o.state={isHidden:!1,isMounted:!1},o.handleReveal=function(){o.revealTimeout=void 0,window.pageYOffset+window.innerHeight-o.refs.el.offsetHeight*o.props.fraction>t.getAbsoluteOffsetTop(o.refs.el)&&(o.setState({isHidden:!1}),o.componentWillUnmount(),"function"==typeof o.props.onReveal&&o.props.onReveal())},o.revealThrottler=function(){o.revealTimeout||(o.revealTimeout=window.setTimeout(o.handleReveal,o.props.throttleTimeout))},a=r,(0,_possibleConstructorReturn3.default)(o,a)}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.revealThrottler),window.removeEventListener("resize",this.revealThrottler,!1)}},{key:"componentDidMount",value:function(){if(this.props.ssr&&window.pageYOffset+window.innerHeight>t.getAbsoluteOffsetTop(this.refs.el))return void this.setState({isHidden:!1,isMounted:!1});this.setState({isHidden:!0,isMounted:!0}),this.revealThrottler(),window.addEventListener("scroll",this.revealThrottler),window.addEventListener("resize",this.revealThrottler,!1)}},{key:"render",value:function(){var e=this.props,t=e.transition,r=e.effect,o=e.style,a=e.className,n=(e.ssr,e.onReveal,e.fraction,e.throttleTimeout,(0,_objectWithoutProperties3.default)(e,["transition","effect","style","className","ssr","onReveal","fraction","throttleTimeout"]));if(!n.children){for(var s="Lorem ipsum dolor sit amet, consectetur adipiscing elit. ",l=0;l<4;l++)s+=s;n.children=_react2.default.createElement("p",null,s)}var i={},f=a,u=!("string"==typeof r||r instanceof String),p=u?r:{};return this.state.isHidden?i=(0,_extends3.default)({opacity:0},p):this.state.isMounted&&(u?i={opacity:1,transition:t}:f=a?a+" "+this.props.effect:this.props.effect),_react2.default.createElement("div",(0,_extends3.default)({},n,{style:(0,_extends3.default)({},o,i),className:f,ref:"el"}))}}],[{key:"getAbsoluteOffsetTop",value:function(e){var r=e.offsetTop,o=e.offsetParent;return r+(o&&t.getAbsoluteOffsetTop(o))}}]),t}(_react2.default.Component);Reveal.propTypes=propTypes,Reveal.defaultProps=defaultProps,exports.default=Reveal;var Fade=exports.Fade=function(e){return _react2.default.createElement(Reveal,e)},SlideDown=exports.SlideDown=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"translate3d(0, -100%, 0)"}}))},SlideDownBig=exports.SlideDownBig=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"translate3d(0, -2000px, 0)"}}))},SlideLeft=exports.SlideLeft=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"translate3d(-100%, 0, 0)"}}))},SlideRight=exports.SlideRight=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"translate3d(100%, 0, 0)"}}))},SlideRightBig=exports.SlideRightBig=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"translate3d(2000px, 0, 0)"}}))},SlideUp=exports.SlideUp=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"translate3d(0, 100%, 0)"}}))},SlideUpBig=exports.SlideUpBig=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"translate3d(0, 2000px, 0)"}}))},Flip=exports.Flip=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"perspective(400px) rotate3d(0, 1, 0, -360deg)"}}))},FlipY=exports.FlipY=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"perspective(400px) rotate3d(0, 1, 0, 90deg)"}}))},FlipX=exports.FlipX=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"perspective(400px) rotate3d(1, 0, 0, 90deg)"}}))},Rotate=exports.Rotate=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"rotate(-200deg)"}}))},RotateDownLeft=exports.RotateDownLeft=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"rotate3d(0, 0, 1, -45deg)",transformOrigin:"left bottom"}}))},RotateDownRight=exports.RotateDownRight=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"rotate3d(0, 0, 1, 45deg)",transformOrigin:"right bottom"}}))},RotateUpLeft=exports.RotateUpLeft=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"rotate3d(0, 0, 1, 45deg)",transformOrigin:"left bottom"}}))},RotateUpRight=exports.RotateUpRight=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"rotate3d(0, 0, 1, -90deg)",transformOrigin:"right bottom"}}))},Zoom=exports.Zoom=function(e){return _react2.default.createElement(Reveal,(0,_extends3.default)({},e,{effect:{transform:"scale3d(.3, .3, .3)"}}))};